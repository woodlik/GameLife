!function a(r,o,u){function c(e,t){if(!o[e]){if(!r[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(h)return h(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var s=o[e]={exports:{}};r[e][0].call(s.exports,function(t){return c(r[e][1][t]||t)},s,s.exports,a,r,o,u)}return o[e].exports}for(var h="function"==typeof require&&require,t=0;t<u.length;t++)c(u[t]);return c}({1:[function(t,e,n){"use strict";var i=a(t("./utils/router")),s=a(t("./routes/routes"));function a(t){return t&&t.__esModule?t:{default:t}}new i.default(s.default);document.getElementById("links").addEventListener("click",function(t){if(t.target.matches("a")){t.preventDefault();var e=t.target.getAttribute("href");window.location.hash=e}})},{"./routes/routes":6,"./utils/router":9}],2:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();var i=function(){function i(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.options=t,this.eventBus=n,this.state=e,this.init(),this.render()}return s(i,[{key:"init",value:function(){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),document.getElementById(this.options.container).appendChild(this.canvas),this.subscribeToClick(),this.subscribeToTick()}},{key:"render",value:function(){this.changeCanvasSizeAccordingState(),this.context.clearRect(0,0,this.options.width,this.options.height),this.context.beginPath();for(var t=0;t<this.state.length;t++)for(var e=0;e<this.state[t].length;e++)if(this.state[t][e]){var n=e*this.options.squareSize,i=t*this.options.squareSize;this.context.moveTo(n,i),this.context.rect(n,i,this.options.squareSize,this.options.squareSize)}this.context.stroke(),this.context.fill()}},{key:"changeCanvasSizeAccordingState",value:function(){this.canvas.width=this.state[0].length*this.options.squareSize,this.canvas.height=this.state.length*this.options.squareSize}},{key:"subscribeToClick",value:function(){var e=this;this.canvas.addEventListener("click",function(t){return e.eventBus.trigger("view:cellChanged",e.getCellByCoordinates(t.offsetX,t.offsetY))})}},{key:"getCellByCoordinates",value:function(t,e){return{row:Math.floor(e/this.options.squareSize),column:Math.floor(t/this.options.squareSize)}}},{key:"subscribeToTick",value:function(){var e=this;this.eventBus.on("stateManager:stateChanged",function(t){e.state=t,e.render()})}}]),i}();n.default=i},{}],3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,s=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),a=t("../utils/gameLife"),r=(i=a)&&i.__esModule?i:{default:i};var o=function(){function i(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.options=t,this.eventBus=e,this.states=[],this.init(),this.subscribeToChangeCell()}return s(i,[{key:"init",value:function(){this.container=document.getElementById(this.options.container),this.render(),this.initGameState(),this.subscribeToClick(),this.subscribeToChangeSpeed(),this.subscribeToChangeSize()}},{key:"initGameState",value:function(){if(!this.states.length){for(var t=[],e=0;e<this.options.height;e++)t.push(Array(this.options.width).fill(!1));this.gameLife=new r.default(t),this.states.push(t),this.stateIndex=this.states.length-1}}},{key:"start",value:function(){var t=this;this.stateIndex!==this.states.length-1&&(this.gameLife.state=this.states[this.stateIndex],this.states.length=this.stateIndex+1),this.timer=setTimeout(function(){t.gameLife.tick(),t.states.push(t.gameLife.state),t.eventBus.trigger("stateManager:stateChanged",t.gameLife.state),t.stateIndex=t.states.length-1,t.start()},this.options.speed.current)}},{key:"stop",value:function(){clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){var t=this.options.speed,e='<input type="button" value="<<" id="previous">\n        <input type="button" id="play" value="|>">\n        <input type="button" value=">>" id="next">\n        <br><br>\n        Width: <input type="number" data-size="width" value="'+this.options.width+'" step="1" min="0" max="30">\n        Height: <input type="number" data-size="height" value="'+this.options.height+'" step="1" min="0" max="20">\n        <br><br>\n        Speed: <input type="range" id="speed" min="'+t.min+'" max="'+t.max+'" step="'+t.step+'" value="'+t.current+'" list="speed-values">';this.container.innerHTML=e}},{key:"subscribeToClick",value:function(){var i=this;this.container.addEventListener("click",function(t){if(t.target.matches("#play")&&(i.timer?(i.stop(),t.target.value="|>",document.getElementById("previous").disabled=!1,document.getElementById("next").disabled=!1):(i.start(),t.target.value="||",document.getElementById("previous").disabled=!0,document.getElementById("next").disabled=!0)),t.target.matches("#previous")){var e=0<i.stateIndex?--i.stateIndex:i.stateIndex;i.eventBus.trigger("stateManager:stateChanged",i.states[e])}if(t.target.matches("#next")){var n=i.stateIndex<i.states.length-1?++i.stateIndex:i.stateIndex;i.eventBus.trigger("stateManager:stateChanged",i.states[n])}})}},{key:"subscribeToChangeSpeed",value:function(){var e=this;this.container.addEventListener("change",function(t){t.target.matches("input[type=range]")&&(e.options.speed.current=t.target.value)})}},{key:"subscribeToChangeSize",value:function(){var e=this;this.container.addEventListener("input",function(t){t.target.hasAttribute("data-size")&&("height"===t.target.getAttribute("data-size")?e.options.height=+t.target.value:e.options.width=+t.target.value,e.changeStateSize())},!0)}},{key:"changeStateSize",value:function(){var t=this.states[this.stateIndex];t.length=this.options.height;for(var e=0;e<this.options.height;e++)t[e]?t[e].length=this.options.width:t[e]=Array(this.options.width).fill(!1);this.eventBus.trigger("stateManager:stateChanged",t)}},{key:"subscribeToChangeCell",value:function(){var i=this;this.eventBus.on("view:cellChanged",function(t){var e=t.row,n=t.column;i.gameLife.state=i.states[i.stateIndex],i.gameLife.state[e][n]=!i.gameLife.state[e][n],i.eventBus.trigger("stateManager:stateChanged",i.gameLife.state)})}},{key:"currentState",get:function(){return this.states[this.stateIndex]}}]),i}();n.default=o},{"../utils/gameLife":8}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();var i=function(){function i(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.options=t,this.eventBus=n,this.state=e,this.init(),this.render()}return s(i,[{key:"init",value:function(){this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),document.getElementById(this.options.container).appendChild(this.svg),this.subscribeToClick(),this.subscribeToTick()}},{key:"render",value:function(){this.changeSvgSizeAccordingState();for(var t=this.options,e=this.svg.textContent="",n=0;n<this.state.length;n++)for(var i=0;i<this.state[n].length;i++){if(this.state[n][i])e+="<rect x='"+i*t.squareSize+"' y='"+n*t.squareSize+"' width='"+t.squareSize+"' height='"+t.squareSize+"' class='svg-square'/>"}this.svg.innerHTML+=e}},{key:"getCellByCoordinates",value:function(t,e){return{row:Math.floor(e/this.options.squareSize),column:Math.floor(t/this.options.squareSize)}}},{key:"changeSvgSizeAccordingState",value:function(){this.svg.setAttribute("width",this.state[0].length*this.options.squareSize),this.svg.setAttribute("height",this.state.length*this.options.squareSize)}},{key:"subscribeToClick",value:function(){var e=this;this.svg.addEventListener("click",function(t){return e.eventBus.trigger("view:cellChanged",e.getCellByCoordinates(t.offsetX,t.offsetY))})}},{key:"subscribeToTick",value:function(){var e=this;this.eventBus.on("stateManager:stateChanged",function(t){e.state=t,e.render()})}}]),i}();n.default=i},{}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();var i=function(){function i(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.options=t,this.eventBus=n,this.state=e,this.init(),this.render()}return s(i,[{key:"init",value:function(){this.container=document.createElement("pre"),this.container.className="textView",document.getElementById(this.options.container).appendChild(this.container),this.subscribeToTick(),this.subscribeToClick()}},{key:"render",value:function(){for(var t="",e=0;e<this.state.length;e++){for(var n=0;n<this.state[e].length;n++)t+=this.state[e][n]?"X":" ";t+="\n"}this.container.innerHTML=t}},{key:"subscribeToClick",value:function(){var o=this;this.container.addEventListener("click",function(t){var e=t.target.clientWidth,n=t.target.clientHeight,i=e/o.state[0].length,s=n/o.state.length,a=t.offsetX,r=t.offsetY;o.eventBus.trigger("view:cellChanged",{row:Math.floor(r/s),column:Math.floor(a/i)})})}},{key:"subscribeToTick",value:function(){var e=this;this.eventBus.on("stateManager:stateChanged",function(t){e.state=t,e.render()})}}]),i}();n.default=i},{}],6:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=u(t("../utils/eventBus")),s=u(t("../components/stateManager")),a=u(t("../components/textView")),r=u(t("../components/canvasView")),o=u(t("../components/svgView"));function u(t){return t&&t.__esModule?t:{default:t}}var c=void 0,h=void 0,l='<div id="view" class="view"></div><hr><div id="stateManager" class="stateManager"></div>',f=document.getElementById("content"),v=[{name:"textView",match:/(^$|#text)/,onEnter:function(){d();new a.default({container:"view"},h.currentState,c)},onLeave:function(){return document.getElementById("view").innerHTML=""}},{name:"canvasView",match:"#canvas",onEnter:function(){d();new r.default({container:"view",squareSize:30},h.currentState,c)},onLeave:function(){return document.getElementById("view").innerHTML=""}},{name:"svgView",match:"#svg",onEnter:function(){d();new o.default({container:"view",squareSize:30},h.currentState,c)},onLeave:function(){return document.getElementById("view").innerHTML=""}},{name:"about",match:"#about",onBeforeEnter:function(){return h.stop()},onEnter:function(){return f.innerHTML="<div>О сайте</div>"},onLeave:function(){f.innerHTML=l,h&&h.init()}}];function d(){c||h||(f.innerHTML=l,c=new i.default,h=new s.default({container:"stateManager",width:20,height:10,speed:{min:1e3,max:5e3,current:2e3,step:2e3}},c))}n.default=v},{"../components/canvasView":2,"../components/stateManager":3,"../components/svgView":4,"../components/textView":5,"../utils/eventBus":7}],7:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=Symbol("listeners");function s(){this[i]={}}s.prototype.on=function(t,e){this[i][t]=this[i][t]||[],this[i][t].push(e)},s.prototype.off=function(t,e){e?this[i][t]=(this[i][t]||[]).filter(function(t){return t!==e}):this[i][t].splice(0,this[i][t].length)},s.prototype.trigger=function(t){if(this[i][t]){var e=Array.prototype.slice.call(arguments,1);this[i][t].forEach(function(t){return t.apply(null,e)})}},s.prototype.once=function(e,n){var i=this;this.on(e,function t(){i.off(e,t),n.apply(null,arguments)})},n.default=s},{}],8:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();var s=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.state=t}return i(e,[{key:"tick",value:function(){var i=this,t=this.state.map(function(t,n){return t.map(function(t,e){return i.isAlive(n,e)})});this.state=t}},{key:"isAlive",value:function(t,e){for(var n=0,i=t-1;i<=t+1;i++)for(var s=e-1;s<=e+1;s++)i===t&&s===e||this.state[i]&&this.state[i][s]&&n++;return this.state[t][e]&&2===n||3===n}}]),e}();n.default=s},{}],9:[function(t,e,n){"use strict";function i(t){this.routes=t||[],this.init()}Object.defineProperty(n,"__esModule",{value:!0}),i.prototype.init=function(){var t=this;window.addEventListener("hashchange",function(){return t.handleUrl(window.location.hash)}),this.handleUrl(window.location.hash)},i.prototype.handleUrl=function(t){var e=this,n=this.findRoute(t),i=this.getUrlParams(n,t);return Promise.resolve().then(function(){return e.currentRoute&&e.currentRoute.onLeave&&e.currentRoute.onLeave(e.currentRouteParams)}).then(function(){return n&&n.onBeforeEnter&&n.onBeforeEnter(i)}).then(function(){return n&&n.onEnter&&n.onEnter(i)}).then(function(){e.currentRoute=n,e.currentRouteParams=i})},i.prototype.findRoute=function(e){return this.routes.find(function(t){return"string"==typeof t.match?t.match===e:t.match instanceof RegExp?t.match.test(e):"function"==typeof t.match?t.match(e):void 0})},i.prototype.getUrlParams=function(t,e){if(t)return t.match instanceof RegExp?e.match(t.match):"function"==typeof t.match?t.match(e):void 0},n.default=i},{}]},{},[1]);